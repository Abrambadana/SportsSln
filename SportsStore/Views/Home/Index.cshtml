@model ProductsListViewModel

<div class="products">
    @foreach (var p in Model.Products ?? Enumerable.Empty<Product>())
    {
        <div class="product-item">
            <div class="row">
                <div class="col-8">
                    <h4>@p.Name</h4>
                    <p>@p.Description</p>
                </div>
                <div class="col-4 text-end">
                    <div class="price-badge">Product Price: ₱@p.Price.ToString("F2")</div>
                    <form asp-controller="Cart" asp-action="AddToCart" method="post">
                        <input type="hidden" name="productId" value="@p.ProductId" />
                        <!-- Remove the returnUrl since we're always going to Cart/Cart -->
                        <button type="submit" class="add-to-cart-btn">Add to Cart</button>
                    </form>
                </div>
            </div>
        </div>
    }
</div>

<div class="pagination">
    @for (int i = 1; i <= Model.PagingInfo.TotalPages; i++)
    {
        @if (Model.CurrentCategory == null)
        {
            <a href="/Page@(i)" class="@(i == Model.PagingInfo.CurrentPage ? "active" : "")">@i</a>
        }
        else
        {
            <a href="/@Model.CurrentCategory/Page@(i)" class="@(i == Model.PagingInfo.CurrentPage ? "active" : "")">@i</a>
        }
    }
</div>